<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    
</body>
<script>
     // 实现一个new操作符
     function myNew(constructor,...args) {
        // 创建一个新对象obj
        let obj = {};
        
        // 将obj.__proto__连接到构造函数fn的原型
        obj.__proto__ = constructor.prototype;

        // 取参数的第一项为构造函数fn,这里可以写(arguments,1)也可以直接(arguments)，都是代表参数的第一项，取构造函数
        let result = constructor.apply(obj,args)
        console.log('打印result类型',typeof result);
        
        // 如果构造函数返回一个对象，则将该对象返回，否则返回步骤1创建的对象
        return typeof result === 'object' ? result : obj;
    }
    
   //测试手写的的new
    function Person(name) {
        this.name = name;
    }

    let p2 = myNew(Person, "自己new出来的小明同学");
    console.log(p2.name);
    console.log('验证原型对象等于对象原型',p2.__proto__===Person.prototype);
    
</script>
</html>